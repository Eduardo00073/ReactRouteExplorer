{"ast":null,"code":"import React from\"react\";import{GoogleMap,Marker,LoadScript,StandaloneSearchBox,DirectionsService,DirectionsRenderer}from\"@react-google-maps/api\";import{REACT_APP_GOOGLE_API_KEY}from\"../App\";import\"./MapPage.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const MapPage=()=>{const[map,setMap]=React.useState();const[searchBoxA,setSearchBoxA]=React.useState();const[searchBoxB,setSearchBoxB]=React.useState();const[pointA,setPointA]=React.useState();const[pointB,setPointB]=React.useState();const[origin,setOrigin]=React.useState(null);const[destination,setDestination]=React.useState(null);const[response,setResponse]=React.useState(null);const position={lat:-20.275986400323127,lng:-50.541355008625324};const onMapLoad=map=>{setMap(map);};const onLoadA=ref=>{setSearchBoxA(ref);};const onLoadB=ref=>{setSearchBoxB(ref);};const onPlacesChangedA=()=>{var _place$geometry,_place$geometry$locat,_place$geometry2,_place$geometry2$loca;const places=searchBoxA.getPlaces();console.log(places);const place=places[0];const location={lat:(place===null||place===void 0?void 0:(_place$geometry=place.geometry)===null||_place$geometry===void 0?void 0:(_place$geometry$locat=_place$geometry.location)===null||_place$geometry$locat===void 0?void 0:_place$geometry$locat.lat())||0,lng:(place===null||place===void 0?void 0:(_place$geometry2=place.geometry)===null||_place$geometry2===void 0?void 0:(_place$geometry2$loca=_place$geometry2.location)===null||_place$geometry2$loca===void 0?void 0:_place$geometry2$loca.lng())||0};setPointA(location);setOrigin(null);setDestination(null);setResponse(null);map===null||map===void 0?void 0:map.panTo(location);};const onPlacesChangedB=()=>{var _place$geometry3,_place$geometry3$loca,_place$geometry4,_place$geometry4$loca;const places=searchBoxB.getPlaces();console.log(places);const place=places[0];const location={lat:(place===null||place===void 0?void 0:(_place$geometry3=place.geometry)===null||_place$geometry3===void 0?void 0:(_place$geometry3$loca=_place$geometry3.location)===null||_place$geometry3$loca===void 0?void 0:_place$geometry3$loca.lat())||0,lng:(place===null||place===void 0?void 0:(_place$geometry4=place.geometry)===null||_place$geometry4===void 0?void 0:(_place$geometry4$loca=_place$geometry4.location)===null||_place$geometry4$loca===void 0?void 0:_place$geometry4$loca.lng())||0};setPointB(location);setOrigin(null);setDestination(null);setResponse(null);map===null||map===void 0?void 0:map.panTo(location);};const traceRoute=()=>{if(pointA&&pointB){setOrigin(pointA);setDestination(pointB);}};const directionsServiceOptions=// @ts-ignore\nReact.useMemo(()=>{return{origin,destination,travelMode:\"DRIVING\"};},[origin,destination]);const directionsCallback=React.useCallback(res=>{if(res!==null&&res.status===\"OK\"){setResponse(res);}else{console.log(res);}},[]);const directionsRendererOptions=React.useMemo(()=>{return{directions:response};},[response]);return/*#__PURE__*/_jsx(\"div\",{className:\"map\",children:/*#__PURE__*/_jsx(LoadScript,{googleMapsApiKey:REACT_APP_GOOGLE_API_KEY,libraries:[\"places\"],children:/*#__PURE__*/_jsxs(GoogleMap,{onLoad:onMapLoad,mapContainerStyle:{width:\"100%\",height:\"100%\"},center:position,zoom:15,options:{mapTypeControl:true,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.BOTTOM_CENTER}// Adicione outras opções de mapa necessárias aqui\n},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"address\",children:[/*#__PURE__*/_jsx(StandaloneSearchBox,{onLoad:onLoadA,onPlacesChanged:onPlacesChangedA,children:/*#__PURE__*/_jsx(\"input\",{className:\"addressField\",placeholder:\"Digite o endere\\xE7o inicial\"})}),/*#__PURE__*/_jsx(StandaloneSearchBox,{onLoad:onLoadB,onPlacesChanged:onPlacesChangedB,children:/*#__PURE__*/_jsx(\"input\",{className:\"addressField\",placeholder:\"Digite o endere\\xE7o final\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"routeButton\",onClick:traceRoute,children:\"Tra\\xE7ar rota\"})]}),!response&&pointA&&/*#__PURE__*/_jsx(Marker,{position:pointA}),!response&&pointB&&/*#__PURE__*/_jsx(Marker,{position:pointB}),origin&&destination&&/*#__PURE__*/_jsx(DirectionsService,{options:directionsServiceOptions,callback:directionsCallback}),response&&directionsRendererOptions&&/*#__PURE__*/_jsx(DirectionsRenderer,{options:directionsRendererOptions})]})})});};export default MapPage;","map":{"version":3,"names":["React","GoogleMap","Marker","LoadScript","StandaloneSearchBox","DirectionsService","DirectionsRenderer","REACT_APP_GOOGLE_API_KEY","jsx","_jsx","jsxs","_jsxs","MapPage","map","setMap","useState","searchBoxA","setSearchBoxA","searchBoxB","setSearchBoxB","pointA","setPointA","pointB","setPointB","origin","setOrigin","destination","setDestination","response","setResponse","position","lat","lng","onMapLoad","onLoadA","ref","onLoadB","onPlacesChangedA","_place$geometry","_place$geometry$locat","_place$geometry2","_place$geometry2$loca","places","getPlaces","console","log","place","location","geometry","panTo","onPlacesChangedB","_place$geometry3","_place$geometry3$loca","_place$geometry4","_place$geometry4$loca","traceRoute","directionsServiceOptions","useMemo","travelMode","directionsCallback","useCallback","res","status","directionsRendererOptions","directions","className","children","googleMapsApiKey","libraries","onLoad","mapContainerStyle","width","height","center","zoom","options","mapTypeControl","mapTypeControlOptions","style","google","maps","MapTypeControlStyle","HORIZONTAL_BAR","ControlPosition","BOTTOM_CENTER","onPlacesChanged","placeholder","onClick","callback"],"sources":["C:/Users/Admin/Desktop/GitHub/ReactRouteExplorer/ReactRouteExplorer/src/pages/MapPage.tsx"],"sourcesContent":["import React from \"react\";\nimport {\n  GoogleMap,\n  Marker,\n  LoadScript,\n  StandaloneSearchBox,\n  DirectionsService,\n  DirectionsRenderer,\n} from \"@react-google-maps/api\";\nimport { REACT_APP_GOOGLE_API_KEY } from \"../App\";\nimport \"./MapPage.css\";\n\nexport interface MapPageProps { }\n\nconst MapPage = () => {\n  const [map, setMap] = React.useState<google.maps.Map>();\n  const [searchBoxA, setSearchBoxA] =\n    React.useState<google.maps.places.SearchBox>();\n  const [searchBoxB, setSearchBoxB] =\n    React.useState<google.maps.places.SearchBox>();\n  const [pointA, setPointA] = React.useState<google.maps.LatLngLiteral>();\n  const [pointB, setPointB] = React.useState<google.maps.LatLngLiteral>();\n\n  const [origin, setOrigin] = React.useState<google.maps.LatLngLiteral | null>(\n    null\n  );\n  const [destination, setDestination] =\n    React.useState<google.maps.LatLngLiteral | null>(null);\n\n  const [response, setResponse] =\n    React.useState<google.maps.DistanceMatrixResponse | null>(null);\n\n  const position = {\n    lat: -20.275986400323127,\n    lng: -50.541355008625324,\n  };\n\n  const onMapLoad = (map: google.maps.Map) => {\n    setMap(map);\n  };\n\n  const onLoadA = (ref: google.maps.places.SearchBox) => {\n    setSearchBoxA(ref);\n  };\n\n  const onLoadB = (ref: google.maps.places.SearchBox) => {\n    setSearchBoxB(ref);\n  };\n\n  const onPlacesChangedA = () => {\n    const places = searchBoxA!.getPlaces();\n    console.log(places);\n    const place = places![0];\n    const location = {\n      lat: place?.geometry?.location?.lat() || 0,\n      lng: place?.geometry?.location?.lng() || 0,\n    };\n    setPointA(location);\n    setOrigin(null);\n    setDestination(null);\n    setResponse(null);\n    map?.panTo(location);\n  };\n\n  const onPlacesChangedB = () => {\n    const places = searchBoxB!.getPlaces();\n    console.log(places);\n    const place = places![0];\n    const location = {\n      lat: place?.geometry?.location?.lat() || 0,\n      lng: place?.geometry?.location?.lng() || 0,\n    };\n    setPointB(location);\n    setOrigin(null);\n    setDestination(null);\n    setResponse(null);\n    map?.panTo(location);\n  };\n\n  const traceRoute = () => {\n    if (pointA && pointB) {\n      setOrigin(pointA);\n      setDestination(pointB);\n    }\n  };\n\n  const directionsServiceOptions =\n    // @ts-ignore\n    React.useMemo<google.maps.DirectionsRequest>(() => {\n      return {\n        origin,\n        destination,\n        travelMode: \"DRIVING\",\n      };\n    }, [origin, destination]);\n\n  const directionsCallback = React.useCallback((res) => {\n    if (res !== null && res.status === \"OK\") {\n      setResponse(res);\n    } else {\n      console.log(res);\n    }\n  }, []);\n\n  const directionsRendererOptions = React.useMemo<any>(() => {\n    return {\n      directions: response,\n    };\n  }, [response]);\n\n  return (\n    <div className=\"map\">\n      <LoadScript\n        googleMapsApiKey={REACT_APP_GOOGLE_API_KEY}\n        libraries={[\"places\"]}\n      >\n        <GoogleMap\n          onLoad={onMapLoad}\n          mapContainerStyle={{ width: \"100%\", height: \"100%\" }}\n          center={position}\n          zoom={15}\n          options={{\n            mapTypeControl: true,\n            mapTypeControlOptions: {\n              style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,\n              position: google.maps.ControlPosition.BOTTOM_CENTER,\n            },\n            // Adicione outras opções de mapa necessárias aqui\n          }}\n        >\n          <div className=\"address\">\n            <StandaloneSearchBox\n              onLoad={onLoadA}\n              onPlacesChanged={onPlacesChangedA}\n            >\n              <input\n                className=\"addressField\"\n                placeholder=\"Digite o endereço inicial\"\n              />\n            </StandaloneSearchBox>\n            <StandaloneSearchBox\n              onLoad={onLoadB}\n              onPlacesChanged={onPlacesChangedB}\n            >\n              <input\n                className=\"addressField\"\n                placeholder=\"Digite o endereço final\"\n              />\n            </StandaloneSearchBox>\n            <button className=\"routeButton\" onClick={traceRoute}>Traçar rota</button>\n          </div>\n\n          {!response && pointA && <Marker position={pointA} />}\n          {!response && pointB && <Marker position={pointB} />}\n\n          {origin && destination && (\n            <DirectionsService\n              options={directionsServiceOptions}\n              callback={directionsCallback}\n            />\n          )}\n\n          {response && directionsRendererOptions && (\n            <DirectionsRenderer options={directionsRendererOptions} />\n          )}\n        </GoogleMap>\n      </LoadScript>\n    </div>\n  );\n};\n\nexport default MapPage;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OACEC,SAAS,CACTC,MAAM,CACNC,UAAU,CACVC,mBAAmB,CACnBC,iBAAiB,CACjBC,kBAAkB,KACb,wBAAwB,CAC/B,OAASC,wBAAwB,KAAQ,QAAQ,CACjD,MAAO,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAIvB,KAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,CACpB,KAAM,CAACC,GAAG,CAAEC,MAAM,CAAC,CAAGd,KAAK,CAACe,QAAQ,CAAkB,CAAC,CACvD,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAC/BjB,KAAK,CAACe,QAAQ,CAA+B,CAAC,CAChD,KAAM,CAACG,UAAU,CAAEC,aAAa,CAAC,CAC/BnB,KAAK,CAACe,QAAQ,CAA+B,CAAC,CAChD,KAAM,CAACK,MAAM,CAAEC,SAAS,CAAC,CAAGrB,KAAK,CAACe,QAAQ,CAA4B,CAAC,CACvE,KAAM,CAACO,MAAM,CAAEC,SAAS,CAAC,CAAGvB,KAAK,CAACe,QAAQ,CAA4B,CAAC,CAEvE,KAAM,CAACS,MAAM,CAAEC,SAAS,CAAC,CAAGzB,KAAK,CAACe,QAAQ,CACxC,IACF,CAAC,CACD,KAAM,CAACW,WAAW,CAAEC,cAAc,CAAC,CACjC3B,KAAK,CAACe,QAAQ,CAAmC,IAAI,CAAC,CAExD,KAAM,CAACa,QAAQ,CAAEC,WAAW,CAAC,CAC3B7B,KAAK,CAACe,QAAQ,CAA4C,IAAI,CAAC,CAEjE,KAAM,CAAAe,QAAQ,CAAG,CACfC,GAAG,CAAE,CAAC,kBAAkB,CACxBC,GAAG,CAAE,CAAC,kBACR,CAAC,CAED,KAAM,CAAAC,SAAS,CAAIpB,GAAoB,EAAK,CAC1CC,MAAM,CAACD,GAAG,CAAC,CACb,CAAC,CAED,KAAM,CAAAqB,OAAO,CAAIC,GAAiC,EAAK,CACrDlB,aAAa,CAACkB,GAAG,CAAC,CACpB,CAAC,CAED,KAAM,CAAAC,OAAO,CAAID,GAAiC,EAAK,CACrDhB,aAAa,CAACgB,GAAG,CAAC,CACpB,CAAC,CAED,KAAM,CAAAE,gBAAgB,CAAGA,CAAA,GAAM,KAAAC,eAAA,CAAAC,qBAAA,CAAAC,gBAAA,CAAAC,qBAAA,CAC7B,KAAM,CAAAC,MAAM,CAAG1B,UAAU,CAAE2B,SAAS,CAAC,CAAC,CACtCC,OAAO,CAACC,GAAG,CAACH,MAAM,CAAC,CACnB,KAAM,CAAAI,KAAK,CAAGJ,MAAM,CAAE,CAAC,CAAC,CACxB,KAAM,CAAAK,QAAQ,CAAG,CACfhB,GAAG,CAAE,CAAAe,KAAK,SAALA,KAAK,kBAAAR,eAAA,CAALQ,KAAK,CAAEE,QAAQ,UAAAV,eAAA,kBAAAC,qBAAA,CAAfD,eAAA,CAAiBS,QAAQ,UAAAR,qBAAA,iBAAzBA,qBAAA,CAA2BR,GAAG,CAAC,CAAC,GAAI,CAAC,CAC1CC,GAAG,CAAE,CAAAc,KAAK,SAALA,KAAK,kBAAAN,gBAAA,CAALM,KAAK,CAAEE,QAAQ,UAAAR,gBAAA,kBAAAC,qBAAA,CAAfD,gBAAA,CAAiBO,QAAQ,UAAAN,qBAAA,iBAAzBA,qBAAA,CAA2BT,GAAG,CAAC,CAAC,GAAI,CAC3C,CAAC,CACDX,SAAS,CAAC0B,QAAQ,CAAC,CACnBtB,SAAS,CAAC,IAAI,CAAC,CACfE,cAAc,CAAC,IAAI,CAAC,CACpBE,WAAW,CAAC,IAAI,CAAC,CACjBhB,GAAG,SAAHA,GAAG,iBAAHA,GAAG,CAAEoC,KAAK,CAACF,QAAQ,CAAC,CACtB,CAAC,CAED,KAAM,CAAAG,gBAAgB,CAAGA,CAAA,GAAM,KAAAC,gBAAA,CAAAC,qBAAA,CAAAC,gBAAA,CAAAC,qBAAA,CAC7B,KAAM,CAAAZ,MAAM,CAAGxB,UAAU,CAAEyB,SAAS,CAAC,CAAC,CACtCC,OAAO,CAACC,GAAG,CAACH,MAAM,CAAC,CACnB,KAAM,CAAAI,KAAK,CAAGJ,MAAM,CAAE,CAAC,CAAC,CACxB,KAAM,CAAAK,QAAQ,CAAG,CACfhB,GAAG,CAAE,CAAAe,KAAK,SAALA,KAAK,kBAAAK,gBAAA,CAALL,KAAK,CAAEE,QAAQ,UAAAG,gBAAA,kBAAAC,qBAAA,CAAfD,gBAAA,CAAiBJ,QAAQ,UAAAK,qBAAA,iBAAzBA,qBAAA,CAA2BrB,GAAG,CAAC,CAAC,GAAI,CAAC,CAC1CC,GAAG,CAAE,CAAAc,KAAK,SAALA,KAAK,kBAAAO,gBAAA,CAALP,KAAK,CAAEE,QAAQ,UAAAK,gBAAA,kBAAAC,qBAAA,CAAfD,gBAAA,CAAiBN,QAAQ,UAAAO,qBAAA,iBAAzBA,qBAAA,CAA2BtB,GAAG,CAAC,CAAC,GAAI,CAC3C,CAAC,CACDT,SAAS,CAACwB,QAAQ,CAAC,CACnBtB,SAAS,CAAC,IAAI,CAAC,CACfE,cAAc,CAAC,IAAI,CAAC,CACpBE,WAAW,CAAC,IAAI,CAAC,CACjBhB,GAAG,SAAHA,GAAG,iBAAHA,GAAG,CAAEoC,KAAK,CAACF,QAAQ,CAAC,CACtB,CAAC,CAED,KAAM,CAAAQ,UAAU,CAAGA,CAAA,GAAM,CACvB,GAAInC,MAAM,EAAIE,MAAM,CAAE,CACpBG,SAAS,CAACL,MAAM,CAAC,CACjBO,cAAc,CAACL,MAAM,CAAC,CACxB,CACF,CAAC,CAED,KAAM,CAAAkC,wBAAwB,CAC5B;AACAxD,KAAK,CAACyD,OAAO,CAAgC,IAAM,CACjD,MAAO,CACLjC,MAAM,CACNE,WAAW,CACXgC,UAAU,CAAE,SACd,CAAC,CACH,CAAC,CAAE,CAAClC,MAAM,CAAEE,WAAW,CAAC,CAAC,CAE3B,KAAM,CAAAiC,kBAAkB,CAAG3D,KAAK,CAAC4D,WAAW,CAAEC,GAAG,EAAK,CACpD,GAAIA,GAAG,GAAK,IAAI,EAAIA,GAAG,CAACC,MAAM,GAAK,IAAI,CAAE,CACvCjC,WAAW,CAACgC,GAAG,CAAC,CAClB,CAAC,IAAM,CACLjB,OAAO,CAACC,GAAG,CAACgB,GAAG,CAAC,CAClB,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAE,yBAAyB,CAAG/D,KAAK,CAACyD,OAAO,CAAM,IAAM,CACzD,MAAO,CACLO,UAAU,CAAEpC,QACd,CAAC,CACH,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAEd,mBACEnB,IAAA,QAAKwD,SAAS,CAAC,KAAK,CAAAC,QAAA,cAClBzD,IAAA,CAACN,UAAU,EACTgE,gBAAgB,CAAE5D,wBAAyB,CAC3C6D,SAAS,CAAE,CAAC,QAAQ,CAAE,CAAAF,QAAA,cAEtBvD,KAAA,CAACV,SAAS,EACRoE,MAAM,CAAEpC,SAAU,CAClBqC,iBAAiB,CAAE,CAAEC,KAAK,CAAE,MAAM,CAAEC,MAAM,CAAE,MAAO,CAAE,CACrDC,MAAM,CAAE3C,QAAS,CACjB4C,IAAI,CAAE,EAAG,CACTC,OAAO,CAAE,CACPC,cAAc,CAAE,IAAI,CACpBC,qBAAqB,CAAE,CACrBC,KAAK,CAAEC,MAAM,CAACC,IAAI,CAACC,mBAAmB,CAACC,cAAc,CACrDpD,QAAQ,CAAEiD,MAAM,CAACC,IAAI,CAACG,eAAe,CAACC,aACxC,CACA;AACF,CAAE,CAAAlB,QAAA,eAEFvD,KAAA,QAAKsD,SAAS,CAAC,SAAS,CAAAC,QAAA,eACtBzD,IAAA,CAACL,mBAAmB,EAClBiE,MAAM,CAAEnC,OAAQ,CAChBmD,eAAe,CAAEhD,gBAAiB,CAAA6B,QAAA,cAElCzD,IAAA,UACEwD,SAAS,CAAC,cAAc,CACxBqB,WAAW,CAAC,8BAA2B,CACxC,CAAC,CACiB,CAAC,cACtB7E,IAAA,CAACL,mBAAmB,EAClBiE,MAAM,CAAEjC,OAAQ,CAChBiD,eAAe,CAAEnC,gBAAiB,CAAAgB,QAAA,cAElCzD,IAAA,UACEwD,SAAS,CAAC,cAAc,CACxBqB,WAAW,CAAC,4BAAyB,CACtC,CAAC,CACiB,CAAC,cACtB7E,IAAA,WAAQwD,SAAS,CAAC,aAAa,CAACsB,OAAO,CAAEhC,UAAW,CAAAW,QAAA,CAAC,gBAAW,CAAQ,CAAC,EACtE,CAAC,CAEL,CAACtC,QAAQ,EAAIR,MAAM,eAAIX,IAAA,CAACP,MAAM,EAAC4B,QAAQ,CAAEV,MAAO,CAAE,CAAC,CACnD,CAACQ,QAAQ,EAAIN,MAAM,eAAIb,IAAA,CAACP,MAAM,EAAC4B,QAAQ,CAAER,MAAO,CAAE,CAAC,CAEnDE,MAAM,EAAIE,WAAW,eACpBjB,IAAA,CAACJ,iBAAiB,EAChBsE,OAAO,CAAEnB,wBAAyB,CAClCgC,QAAQ,CAAE7B,kBAAmB,CAC9B,CACF,CAEA/B,QAAQ,EAAImC,yBAAyB,eACpCtD,IAAA,CAACH,kBAAkB,EAACqE,OAAO,CAAEZ,yBAA0B,CAAE,CAC1D,EACQ,CAAC,CACF,CAAC,CACV,CAAC,CAEV,CAAC,CAED,cAAe,CAAAnD,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}